#!/bin/bash
# Сколько файлов мы переименовали
num=0 
# Перебираем все файлы в текущем каталоге                                                 
for filename in * 
do        
# Передаем имя файла фильтру grep
# Если имя файла содержит пробел, то код завершения
# последней операции равен 0
echo "$filename" | grep -q " "
if [ $? -eq 0 ]
then
# Если код завершения равен 0, переименовываем файл
fname=$filename
n='echo $fname | sed -e "s/ /_/g"'
mv "$fname" $n 
let "num += 1"
fi
done
echo "Переименовано файлов: $num" 
exit 0